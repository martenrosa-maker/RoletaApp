<!DOCTYPE html>
<html lang="pt-br">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Roleta com Quiz e Pontuação</title>
  <!-- Tailwind CSS para um design moderno e responsivo -->
  <script src="https://cdn.tailwindcss.com"></script>
  <style>
    /* Estilos personalizados para a roleta e o ponteiro */
    body {
      font-family: 'Inter', sans-serif;
    }
    
    .wheel-container {
      position: relative;
      width: 300px;
      height: 300px;
      border-radius: 50%;
      overflow: hidden;
      box-shadow: 0 10px 25px rgba(0, 0, 0, 0.2);
    }

    .wheel {
      width: 100%;
      height: 100%;
      transition: transform 4s cubic-bezier(0.33, 1, 0.68, 1);
      transform: rotate(0deg);
    }
    
    .pointer {
      position: absolute;
      top: -20px;
      left: 50%;
      transform: translateX(-50%);
      width: 0;
      height: 0;
      border-left: 15px solid transparent;
      border-right: 15px solid transparent;
      border-bottom: 25px solid #ef4444;
      z-index: 10;
    }
    
    .wheel-segment {
      position: absolute;
      top: 0;
      right: 0;
      width: 50%;
      height: 50%;
      transform-origin: 0% 100%;
      display: flex;
      justify-content: center;
      align-items: center;
      font-weight: bold;
      color: white;
      text-shadow: 1px 1px 2px rgba(0, 0, 0, 0.4);
    }

    /* Estilos para as opções de resposta */
    .option {
      cursor: pointer;
      transition: background-color 0.3s;
    }

    .option:hover {
      background-color: #e2e8f0;
    }

    .correct-answer {
      background-color: #10b981 !important;
      color: white;
    }

    .wrong-answer {
      background-color: #ef4444 !important;
      color: white;
    }
    
  </style>
</head>
<body class="bg-gray-100 flex flex-col items-center justify-start min-h-screen py-10">

  <h1 class="text-3xl font-bold text-gray-800 mb-6">Quiz da Roleta</h1>

  <div class="wheel-container mb-6 bg-gray-200">
    <div class="pointer"></div>
    <div class="wheel" id="wheel">
      <!-- As fatias da roleta serão geradas dinamicamente pelo JavaScript -->
    </div>
  </div>

  <div class="scoreboard text-lg font-bold text-gray-700">Pontuação: <span id="score" class="text-blue-600">0</span></div>

  <button onclick="spin()" id="spin-button" class="mt-4 px-6 py-3 bg-blue-500 text-white font-bold rounded-lg shadow-lg hover:bg-blue-600 transition-colors duration-300">Girar</button>

  <div id="quiz" class="mt-8 max-w-md w-full p-6 bg-white rounded-lg shadow-md hidden">
    <p id="question" class="font-semibold text-gray-800 text-lg mb-4 text-center">Pergunta será exibida aqui</p>
    <div id="options" class="flex flex-col space-y-2"></div>
  </div>
  
  <!-- Mensagem de vitória (era o redirecionamento hardcoded) -->
  <div id="winner-message" class="hidden mt-8 text-center animate-pulse">
    <p class="text-4xl font-extrabold text-green-600">Parabéns, você venceu!</p>
    <p class="text-xl text-gray-600 mt-2">Clique em "Girar" para começar um novo jogo.</p>
  </div>

  <div id="feedback" class="mt-4 hidden text-center animate-zoomIn"></div>

  <script>
    let currentRotation = 0;
    let score = 0;
    let isSpinning = false;
    const scoreDisplay = document.getElementById("score");
    const feedback = document.getElementById("feedback");
    const wheelElement = document.getElementById("wheel");
    const quizDiv = document.getElementById("quiz");
    const spinButton = document.getElementById("spin-button");
    const winnerMessage = document.getElementById("winner-message");

    // As perguntas agora são um array, facilitando o gerenciamento e a correspondência com os segmentos da roleta.
    // Adicionei mais perguntas para que a roleta tenha mais opções.
    const questions = [
      {
        id: 1,
        q: "Você comeu 2/6 de um bolo e seu irmão comeu 3/6 do mesmo bolo. Qual a fração total do bolo que os dois comeram?",
        options: ["5/6", " 1/2", "4/6"],
        answer: "5/6"
      },
      {
        id: 2,
        q: "Quanto é 5 x 3?",
        options: ["15", "10", "8"],
        answer: "15"
      },
      {
        id: 3,
        q: "Qual o maior planeta do sistema solar?",
        options: ["Terra", "Júpiter", "Marte"],
        answer: "Júpiter"
      },
      {
        id: 4,
        q: "Quantos lados tem um triângulo?",
        options: ["4", "3", "5"],
        answer: "3"
      },
      {
        id: 5,
        q: "Qual é o símbolo químico da água?",
        options: ["H2O", "O2", "CO2"],
        answer: "H2O"
      },
      {
        id: 6,
        q: "Em que continente está o Egito?",
        options: ["Ásia", "Europa", "África"],
        answer: "África"
      },
      {
        id: 7,
        q: "Quantos vértices tem um cubo?",
        options: ["6", "12", "8"],
        answer: "8"
      },
      {
        id: 8,
        q: "Qual o resultado de 10 - 4 + 2?",
        options: ["4", "8", "12"],
        answer: "8"
      },
      {
        id: 9,
        q: "Qual animal é conhecido como o 'rei da selva'?",
        options: ["Elefante", "Tigre", "Leão"],
        answer: "Leão"
      },
      {
        id: 10,
        q: "Quem pintou a Mona Lisa?",
        options: ["Van Gogh", "Leonardo da Vinci", "Picasso"],
        answer: "Leonardo da Vinci"
      },
      {
        id: 11,
        q: "Quantos planetas existem no nosso sistema solar?",
        options: ["8", "9", "10"],
        answer: "8"
      },
      {
        id: 12,
        q: "Qual é a capital do Brasil?",
        options: ["São Paulo", "Rio de Janeiro", "Brasília"],
        answer: "Brasília"
      }
    ];

    // Array de cores para os segmentos da roleta
    const segmentColors = [
      '#FF6384', '#36A2EB', '#FFCE56', '#4BC0C0', '#9966FF', '#FF9F40',
      '#FF6384', '#36A2EB', '#FFCE56', '#4BC0C0', '#9966FF', '#FF9F40'
    ];

    // Função para gerar as fatias da roleta dinamicamente
    function generateWheel() {
      const totalSegments = questions.length;
      const degreesPerSegment = 360 / totalSegments;

      wheelElement.innerHTML = ''; // Limpa a roleta
      questions.forEach((q, index) => {
        const segment = document.createElement('div');
        segment.classList.add('wheel-segment', `bg-[${segmentColors[index]}]`);
        segment.style.transform = `rotate(${index * degreesPerSegment}deg)`;
        
        // Adiciona um número ou texto no segmento
        const segmentText = document.createElement('span');
        segmentText.textContent = q.id;
        segment.appendChild(segmentText);

        wheelElement.appendChild(segment);
      });
    }

    // A lógica de giro foi ajustada para corresponder ao número de perguntas
    function spin() {
      if (isSpinning) return;
      isSpinning = true;
      quizDiv.classList.add('hidden');
      feedback.classList.add('hidden');
      winnerMessage.classList.add('hidden');
      spinButton.disabled = true;

      const totalSegments = questions.length;
      const degreesPerSegment = 360 / totalSegments;
      const randomSegmentIndex = Math.floor(Math.random() * totalSegments);
      
      // A rotação final é calculada para parar no centro de um segmento
      const rotationToStop = 360 - (randomSegmentIndex * degreesPerSegment + degreesPerSegment / 2);
      
      // Garante múltiplas voltas e para no segmento correto
      const fullRotations = 10;
      currentRotation += fullRotations * 360 + rotationToStop;

      wheelElement.style.transform = `rotate(${currentRotation}deg)`;

      setTimeout(() => {
        isSpinning = false;
        spinButton.disabled = false;
        showQuestion(questions[randomSegmentIndex]);
      }, 4200);
    }

    function showQuestion(question) {
      const questionText = document.getElementById("question");
      const optionsDiv = document.getElementById("options");

      questionText.textContent = question.q;
      optionsDiv.innerHTML = "";

      // Mostra as opções e define os eventos de clique
      question.options.forEach(option => {
        const btn = document.createElement("div");
        btn.textContent = option;
        btn.className = "option p-3 bg-gray-200 rounded-md text-left transition-colors duration-200 shadow-sm";
        btn.onclick = () => {
          if (btn.classList.contains("answered")) return;
          
          optionsDiv.querySelectorAll('.option').forEach(opt => {
            opt.classList.add("answered");
            if (opt.textContent.trim() === question.answer.trim()) {
              opt.classList.add('correct-answer');
            } else {
              opt.classList.add('wrong-answer');
            }
          });

          if (option.trim() === question.answer.trim()) {
            score++;
            scoreDisplay.textContent = score;
            showFeedback(true);
            if (score >= 4) { // Condição de vitória ajustada para 4 pontos
              winnerMessage.classList.remove('hidden');
            }
          } else {
            showFeedback(false);
          }
        };
        optionsDiv.appendChild(btn);
      });

      quizDiv.classList.remove('hidden');
    }

    function showFeedback(isCorrect) {
      feedback.textContent = isCorrect ? "Sua resposta está correta!" : "Sua resposta está errada!";
      feedback.className = `mt-4 text-center text-2xl font-bold animate-zoomIn ${isCorrect ? 'text-green-600' : 'text-red-600'}`;
      feedback.classList.remove('hidden');

      setTimeout(() => {
        feedback.classList.add('hidden');
      }, 1500);
    }
    
    // Inicializa a roleta ao carregar a página
    window.onload = () => {
      generateWheel();
    };
  </script>
</body>
</html>
